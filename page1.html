<!DOCTYPE html>
<html lang="en">
<head>
      <script type="module">

  // Import the functions you need from the SDKs you need

  import { initializeApp } from "https://www.gstatic.com/firebasejs/12.2.1/firebase-app.js";

  import { getAnalytics } from "https://www.gstatic.com/firebasejs/12.2.1/firebase-analytics.js";

  // TODO: Add SDKs for Firebase products that you want to use

  // https://firebase.google.com/docs/web/setup#available-libraries


  // Your web app's Firebase configuration

  // For Firebase JS SDK v7.20.0 and later, measurementId is optional

  const firebaseConfig = {

    apiKey: "AIzaSyCF8rg7QuK6oNBwDgqgxWEes8A_4WvllVU",

    authDomain: "lsv-aperolstand.firebaseapp.com",

    projectId: "lsv-aperolstand",

    storageBucket: "lsv-aperolstand.firebasestorage.app",

    messagingSenderId: "62289008940",

    appId: "1:62289008940:web:db4822f38b0b6fcfe7f489",

    measurementId: "G-N4L6V2XGF0"

  };


  // Initialize Firebase

  const app = initializeApp(firebaseConfig);

  const analytics = getAnalytics(app);

</script>

  <meta charset="UTF-8">
  <title>Counter Page</title>
  <style>
    body { font-family: sans-serif; display: flex; flex-direction: column; align-items: center; margin: 2rem; }
    button { margin: 0.5rem; padding: 1rem 2rem; font-size: 1.2rem; border: none; border-radius: 6px; color: white; cursor: pointer; }
    .row { display: flex; gap: 1rem; margin-bottom: 1rem; }
    .aperol { background-color: orange; }
    .lillet { background-color: gold; color: black; }   /* yellow works better with dark text */
    .hugo { background-color: green; }
    .cuba { background-color: saddlebrown; }
    .sekt { background-color: #722f37; } /* wine-like color */
    .control-btn { background: #444; }
  </style>
</head>
<body>
  <h1>Counter Page</h1>
  <div class="row">
    <button id="btn0" class="aperol">Aperol: 0</button>
    <button id="btn1" class="lillet">Lillet: 0</button>
    <button id="btn2" class="hugo">Hugo: 0</button>
    <button id="btn3" class="cuba">Cuba: 0</button>
    <button id="btn4" class="sekt">Sekt: 0</button>
  </div>
  <div class="row">
    <button id="reset" class="control-btn">Reset</button>
    <button id="lock" class="control-btn">Lock</button>
  </div>
  <a href="index.html">â¬… Back to Home</a>

<script>
  const names = ["Aperol", "Lillet", "Hugo", "Cuba", "Sekt"];
  let counters = [0, 0, 0, 0, 0];

  function updateButtons() {
    counters.forEach((val, i) => {
      document.getElementById(`btn${i}`).innerText = `${names[i]}: ${val}`;
    });
  }

  // Load counters from Firestore
  async function loadCounters() {
    const doc = await db.collection("state").doc("counters").get();
    if (doc.exists) {
      counters = doc.data().values;
    }
    updateButtons();
  }

  // Save counters to Firestore
  async function saveCounters() {
    await db.collection("state").doc("counters").set({ values: counters });
  }

  counters.forEach((_, i) => {
    document.getElementById(`btn${i}`).addEventListener("click", async () => {
      counters[i]++;
      updateButtons();
      await saveCounters();
    });
  });

  document.getElementById("reset").addEventListener("click", async () => {
    counters = [0, 0, 0, 0, 0];
    updateButtons();
    await saveCounters();
  });

  document.getElementById("lock").addEventListener("click", async () => {
    await db.collection("lockedRows").add({ values: [...counters], ts: Date.now() });
    counters = [0, 0, 0, 0, 0]; // reset after lock
    updateButtons();
    await saveCounters();
  });

  loadCounters();
</script>
</body>
</html>
