<!DOCTYPE html>
<html lang="en">
<head>
        <script type="module">

  // Import the functions you need from the SDKs you need

  import { initializeApp } from "https://www.gstatic.com/firebasejs/12.2.1/firebase-app.js";

  import { getAnalytics } from "https://www.gstatic.com/firebasejs/12.2.1/firebase-analytics.js";

  // TODO: Add SDKs for Firebase products that you want to use

  // https://firebase.google.com/docs/web/setup#available-libraries


  // Your web app's Firebase configuration

  // For Firebase JS SDK v7.20.0 and later, measurementId is optional

  const firebaseConfig = {

    apiKey: "AIzaSyCF8rg7QuK6oNBwDgqgxWEes8A_4WvllVU",

    authDomain: "lsv-aperolstand.firebaseapp.com",

    projectId: "lsv-aperolstand",

    storageBucket: "lsv-aperolstand.firebasestorage.app",

    messagingSenderId: "62289008940",

    appId: "1:62289008940:web:db4822f38b0b6fcfe7f489",

    measurementId: "G-N4L6V2XGF0"

  };


  // Initialize Firebase

  const app = initializeApp(firebaseConfig);

  const analytics = getAnalytics(app);

</script>

  <meta charset="UTF-8">
  <title>Locked Rows</title>
  <style>
    body { font-family: sans-serif; display: flex; flex-direction: column; align-items: center; margin: 2rem; }
    .row { display: flex; gap: 1rem; align-items: center; margin-bottom: 1rem; }
    .numbers { font-family: monospace; font-size: 1.1rem; display: flex; gap: 1rem; flex-wrap: wrap; }
    button { padding: 0.5rem 1rem; }
  </style>
</head>
<body>
  <h1>Locked Rows</h1>
  <div id="rows"></div>
  <a href="index.html">â¬… Back to Home</a>

<script>
  const names = ["Aperol", "Lillet", "Hugo", "Cuba", "Sekt"];

  function renderRow(row, id) {
    const rowDiv = document.createElement("div");
    rowDiv.className = "row";

    const nums = document.createElement("div");
    nums.className = "numbers";
    nums.textContent = row.values.map((val, i) => `${names[i]}: ${val}`).join(" | ");
    rowDiv.appendChild(nums);

    const delBtn = document.createElement("button");
    delBtn.textContent = "Delete";
    delBtn.addEventListener("click", async () => {
      await db.collection("lockedRows").doc(id).delete();
    });
    rowDiv.appendChild(delBtn);

    return rowDiv;
  }

  const container = document.getElementById("rows");

  // Subscribe to Firestore
  db.collection("lockedRows").orderBy("ts")
    .onSnapshot(snapshot => {
      container.innerHTML = "";
      snapshot.forEach(doc => {
        container.appendChild(renderRow(doc.data(), doc.id));
      });
      if (snapshot.empty) {
        container.innerHTML = "<p>No rows yet.</p>";
      }
    });
</script>
</body>
</html>
